webpackJsonp([0],{0:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=r(1),u=n(a),s=r(30),l=n(s),o=r(163),d=r(226),i=r(233),c=r(248),f=n(c),p=r(265),m=n(p),h={user:window.__INITIAL_STATE__.user},w=(0,i.combineReducers)(m["default"]),_=(0,i.createStore)(w,h);l["default"].render(u["default"].createElement(d.Provider,{store:_},u["default"].createElement(o.Router,{routes:f["default"],history:o.browserHistory})),document.querySelector("main"))},248:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(249),u=n(a),s=r(257),l=n(s),o=r(258),d=n(o),i=r(261),c=n(i),f=r(263),p=n(f);t["default"]={path:"/",component:u["default"],indexRoute:{component:l["default"]},childRoutes:[{path:"login",component:d["default"]},{path:"signup",component:c["default"]},{path:"change-password",component:p["default"]}]}},249:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){return s["default"].createElement("div",null,s["default"].createElement(o["default"],null),e.children,s["default"].createElement(i["default"],null))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var u=r(1),s=n(u),l=r(250),o=n(l),d=r(256),i=n(d)},250:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.user,r=e.logoutUser;return l["default"].createElement("header",null,l["default"].createElement(o.IndexLink,{to:{pathname:"/"}},"Cryptonite"),l["default"].createElement("nav",null,t.authenticated?l["default"].createElement(f,{user:t,logoutUser:r}):l["default"].createElement(u,null)))}function u(e){return l["default"].createElement("ul",null,l["default"].createElement("li",null,l["default"].createElement(o.Link,{to:{pathname:"signup"}},"Sign Up")),l["default"].createElement("li",null,l["default"].createElement(o.Link,{to:{pathname:"login"}},"Login")))}Object.defineProperty(t,"__esModule",{value:!0});var s=r(1),l=n(s),o=r(163),d=r(226),i=r(251),c=r(254),f=(0,o.withRouter)(function(e){var t=function(t){t.preventDefault(),(0,i.logout)().then(function(){e.logoutUser(),e.router.push("/")})};return l["default"].createElement("ul",null,l["default"].createElement("li",null,e.user.username),l["default"].createElement("li",null,l["default"].createElement("a",{href:"#",onClick:t},"Logout")),l["default"].createElement("li",null,l["default"].createElement(o.Link,{to:{pathname:"change-password"}},"Change Password")))});t["default"]=(0,d.connect)(function(e){return{user:e.user}},{logoutUser:c.logoutUser})(a)},251:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changePassword=t.logout=t.signup=t.login=void 0,r(252);var n=r(253);t.login=function(e,t){var r=(0,n.getCSRFToken)();return fetch("/api/auth/login",{method:"POST",credentials:"same-origin",headers:{"X-CSRFToken":r},body:JSON.stringify({username:e,password:t})})},t.signup=function(e,t,r){return fetch("/api/auth/signup",{method:"POST",credentials:"same-origin",headers:{"X-CSRFToken":(0,n.getCSRFToken)()},body:JSON.stringify({username:e,password1:t,password2:r})})},t.logout=function(){return fetch("/api/auth/logout",{method:"POST",credentials:"same-origin",headers:{"X-CSRFToken":(0,n.getCSRFToken)()}})},t.changePassword=function(e,t,r){return fetch("/api/auth/change_password",{method:"POST",credentials:"same-origin",headers:{"X-CSRFToken":(0,n.getCSRFToken)()},body:JSON.stringify({old_password:e,new_password1:t,new_password2:r})})}},253:function(e,t){"use strict";function r(){var e=document.cookie.split("&");return e.reduce(function(e,t){if(void 0!==e)return e;var r=t.split("="),a=n(r,2),u=a[0],s=a[1];return"csrftoken"===u?s:e},void 0)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){var r=[],n=!0,a=!1,u=void 0;try{for(var s,l=e[Symbol.iterator]();!(n=(s=l.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(o){a=!0,u=o}finally{try{!n&&l["return"]&&l["return"]()}finally{if(a)throw u}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.getCSRFToken=r},254:function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.logoutUser=t.loginUser=void 0;var a=r(255),u=n(a);t.loginUser=function(e){return{type:u.LOGIN_USER,user:e}},t.logoutUser=function(){return{type:u.LOGOUT_USER}}},255:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LOGIN_USER="LOGIN_USER",t.LOGOUT_USER="LOGOUT_USER"},256:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){return s["default"].createElement("div",null,"made by ",s["default"].createElement("a",{href:"http://www.pshrmn.com"},"pshrmn.com"))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var u=r(1),s=n(u)},257:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){return s["default"].createElement("div",null,"Index Page")}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var u=r(1),s=n(u)},258:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){return s["default"].createElement("div",null,s["default"].createElement("h2",null,"Login"),s["default"].createElement(d["default"],null),s["default"].createElement("p",null,"Don't have an account? ",s["default"].createElement(l.Link,{to:{pathname:"/signup"}},"Sign up here")))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var u=r(1),s=n(u),l=r(163),o=r(259),d=n(o)},259:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),u=n(a),s=r(226),l=r(163),o=r(260),d=r(251),i=r(254),c=u["default"].createClass({displayName:"LoginForm",getInitialState:function(){return{username:"",password:"",errors:{}}},handleUsername:function(e){this.setState({username:e.target.value})},handlePassword:function(e){this.setState({password:e.target.value})},handleSubmit:function(e){var t=this;e.preventDefault(),(0,d.login)(this.state.username,this.state.password).then(function(e){return e.json()}).then(function(e){return e.success?(t.props.loginUser(e.user),void t.props.router.push("/")):Promise.reject(e.errors)})["catch"](function(e){t.setState({errors:e})})},render:function(){var e=this.state,t=e.username,r=e.password,n=e.errors,a=void 0===n?{}:n;return u["default"].createElement("form",{onSubmit:this.handleSubmit},u["default"].createElement(o.Errors,{errors:a.__all__}),u["default"].createElement(o.InputRow,{name:"Username",value:t,handler:this.handleUsername,errors:a.username,id:"login-username-input"}),u["default"].createElement(o.InputRow,{name:"Password",value:r,type:"password",handler:this.handlePassword,errors:a.password,id:"login-password-input"}),u["default"].createElement("div",null,u["default"].createElement("button",null,"Login")))}});t["default"]=(0,s.connect)(null,{loginUser:i.loginUser})((0,l.withRouter)(c))},260:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Errors=t.InputRow=void 0;var a=r(1),u=n(a),s=(t.InputRow=function(e){var t=e.name,r=e.value,n=void 0===r?"":r,a=e.type,l=void 0===a?"text":a,o=e.handler,d=e.id,i=void 0===d?"input-"+Math.floor(1e4*Math.random()):d,c=e.errors;return u["default"].createElement("div",{className:"input-row"},u["default"].createElement("div",null,u["default"].createElement(s,{errors:c})),u["default"].createElement("label",{htmlFor:i},t),u["default"].createElement("input",{type:l,id:i,value:n,onChange:o}))},t.Errors=function(e){var t=e.errors;return t&&t.length?u["default"].createElement("ul",{className:"errors"},t.map(function(e,t){return u["default"].createElement("li",{key:t},e)})):null})},261:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){return s["default"].createElement("div",null,s["default"].createElement("h2",null,"Sign Up"),s["default"].createElement(d["default"],null),s["default"].createElement("p",null,"Already have an account? ",s["default"].createElement(l.Link,{to:{pathname:"/login"}},"Login here")))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var u=r(1),s=n(u),l=r(163),o=r(262),d=n(o)},262:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),u=n(a),s=r(226),l=r(163),o=r(260),d=r(251),i=r(254),c=u["default"].createClass({displayName:"SignupForm",getInitialState:function(){return{username:"",password1:"",password2:""}},handleUsername:function(e){this.setState({username:e.target.value})},handlePassword1:function(e){this.setState({password1:e.target.value})},handlePassword2:function(e){this.setState({password2:e.target.value})},handleSubmit:function(e){var t=this;e.preventDefault(),(0,d.signup)(this.state.username,this.state.password1,this.state.password2).then(function(e){return e.json()}).then(function(e){return e.success?(t.props.loginUser(e.user),void t.props.router.push("/")):Promise.reject(e.errors)})["catch"](function(e){t.setState({errors:e})})},render:function(){var e=this.state,t=e.username,r=e.password1,n=e.password2,a=e.errors,s=void 0===a?{}:a;return u["default"].createElement("form",{onSubmit:this.handleSubmit},u["default"].createElement(o.Errors,{errors:s.__all__}),u["default"].createElement(o.InputRow,{name:"Username",value:t,handler:this.handleUsername,errors:s.username,id:"signup-username-input"}),u["default"].createElement(o.InputRow,{name:"Password",value:r,type:"password",handler:this.handlePassword1,errors:s.password1,id:"signup-password1-input"}),u["default"].createElement(o.InputRow,{name:"Password (Verify)",value:n,type:"password",handler:this.handlePassword2,errors:s.password2,id:"signup-password2-input"}),u["default"].createElement("div",null,u["default"].createElement("button",null,"Sign Up")))}});t["default"]=(0,s.connect)(null,{loginUser:i.loginUser})((0,l.withRouter)(c))},263:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){return s["default"].createElement("div",null,s["default"].createElement("h2",null,"Change Password"),s["default"].createElement(o["default"],null))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var u=r(1),s=n(u),l=r(264),o=n(l)},264:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),u=n(a),s=r(260),l=r(251),o=u["default"].createClass({displayName:"ChangePasswordForm",getInitialState:function(){return{old_password:"",new_password1:"",new_password2:"",success:!1}},handleOldPassword:function(e){this.setState({old_password:e.target.value,success:!1})},handlePassword1:function(e){this.setState({new_password1:e.target.value,success:!1})},handlePassword2:function(e){this.setState({new_password2:e.target.value,success:!1})},handleSubmit:function(e){var t=this;e.preventDefault();var r=this.state,n=r.old_password,a=r.new_password1,u=r.new_password2;(0,l.changePassword)(n,a,u).then(function(e){return e.json()}).then(function(e){return e.success?void t.setState({success:!0,errors:{}}):Promise.reject(e.errors)})["catch"](function(e){t.setState({errors:e})})},render:function(){var e=this.state,t=e.old_password,r=e.new_password1,n=e.new_password2,a=e.success,l=e.errors,o=void 0===l?{}:l;return u["default"].createElement("form",{onSubmit:this.handleSubmit},a?u["default"].createElement("p",null,"Password change successful"):null,u["default"].createElement(s.Errors,{errors:o.__all__}),u["default"].createElement(s.InputRow,{name:"Old Password",value:t,type:"password",handler:this.handleOldPassword,errors:o.old_password,id:"password-old_password-input"}),u["default"].createElement(s.InputRow,{name:"Password",value:r,type:"password",handler:this.handlePassword1,errors:o.new_password1,id:"password-password1-input"}),u["default"].createElement(s.InputRow,{name:"Password (Verify)",value:n,type:"password",handler:this.handlePassword2,errors:o.new_password2,id:"password-password2-input"}),u["default"].createElement("div",null,u["default"].createElement("button",null,"Change Password")))}});t["default"]=o},265:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(266),u=n(a);t["default"]={user:u["default"]}},266:function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];switch(t.type){case u.LOGIN_USER:return Object.assign({},t.user,{authenticated:!0});case u.LOGOUT_USER:return{authenticated:!1};default:return e}};var a=r(255),u=n(a)}});